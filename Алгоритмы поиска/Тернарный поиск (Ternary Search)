def ternary_search(arr, target):
    """
    Реализует алгоритм Тернарного поиска для отсортированного массива.

    Принцип работы:
    1. Делит диапазон индексов на три части.
    2. Сравнивает искомый элемент с элементами на двух разделительных границах.
    3. Если совпадение не найдено, алгоритм повторяется рекурсивно
       (или итеративно) в одной из трети массива, где может находиться искомое значение.

    Сложность: O(log_3 n) - логарифм по основанию 3.
    Однако число сравнений на шаг выше, чем в двоичном поиске.

    Args:
        arr (list): Отсортированный список чисел, в котором нужно найти target.
        target: Значение, которое необходимо найти.

    Returns:
        int: Индекс target, если он найден. В противном случае -1.
    """
    n = len(arr)

    # Проверка на пустой массив
    if n == 0:
        return -1

    low = 0
    high = n - 1

    while low <= high:
        # Если диапазон слишком мал для деления на 3 части (меньше 3 элементов),
        # то mid1 и mid2 могут совпасть или быть некорректными.
        # В таком случае, просто проверяем оставшиеся элементы.
        # Это упрощение, которое позволяет избежать более сложных условий
        # для очень маленьких диапазонов.
        if (high - low + 1) < 3:
            for i in range(low, high + 1):
                if arr[i] == target:
                    return i
            return -1 # Элемент не найден в оставшемся малом диапазоне

        # Делим диапазон на три части
        mid1 = low + (high - low) // 3
        mid2 = high - (high - low) // 3
        
        # Убедимся, что mid1 и mid2 не одинаковы, если диапазон позволяет
        # (в очень маленьких диапазонах они могут быть одинаковыми)
        # Если mid1 и mid2 одинаковы, мы уже обработали это выше
        # с помощью (high - low + 1) < 3

        # Сравниваем искомый элемент с элементами на двух разделительных границах
        if arr[mid1] == target:
            return mid1
        elif arr[mid2] == target:
            return mid2

        # Определяем, в какой трети находится искомый элемент
        if target < arr[mid1]:
            # Искомый элемент находится в левой трети
            high = mid1 - 1
        elif target > arr[mid2]:
            # Искомый элемент находится в правой трети
            low = mid2 + 1
        else:
            # Искомый элемент находится в средней трети
            low = mid1 + 1
            high = mid2 - 1
            
    return -1 # Элемент не найден в массиве
    # --- Примеры использования ---
if __name__ == "__main__":
    data = [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610]
    
    print(f"Массив: {data}")

    # Примеры найденных элементов
    target1 = 55
    index1 = ternary_search(data, target1)
    print(f"Поиск {target1}: Индекс {index1} (Ожидается 10)")

    target2 = 1
    index2 = ternary_search(data, target2)
    print(f"Поиск {target2}: Индекс {index2} (Ожидается 1)")

    target3 = 610
    index3 = ternary_search(data, target3)
    print(f"Поиск {target3}: Индекс {index3} (Ожидается 15)")

    target_first = 0
    index_first = ternary_search(data, target_first)
    print(f"Поиск {target_first}: Индекс {index_first} (Ожидается 0)")

    # Примеры ненайденных элементов
    target4 = 4
    index4 = ternary_search(data, target4)
    print(f"Поиск {target4}: Индекс {index4} (Ожидается -1)")

    target5 = 100
    index5 = ternary_search(data, target5)
    print(f"Поиск {target5}: Индекс {index5} (Ожидается -1)")

    target6 = -1 # Меньше первого элемента
    index6 = ternary_search(data, target6)
    print(f"Поиск {target6}: Индекс {index6} (Ожидается -1)")

    target7 = 700 # Больше последнего элемента
    index7 = ternary_search(data, target7)
    print(f"Поиск {target7}: Индекс {index7} (Ожидается -1)")

    empty_data = []
    target_empty = 5
    index_empty = ternary_search(empty_data, target_empty)
    print(f"\nПоиск {target_empty} в пустом массиве: Индекс {index_empty} (Ожидается -1)")

    single_element_data = [42]
    target_single_found = 42
    target_single_not_found = 10
    print(f"\nМассив: {single_element_data}")
    index_single_found = ternary_search(single_element_data, target_single_found)
    print(f"Поиск {target_single_found}: Индекс {index_single_found} (Ожидается 0)")
    index_single_not_found = ternary_search(single_element_data, target_single_not_found)
    print(f"Поиск {target_single_not_found}: Индекс {index_single_not_found} (Ожидается -1)")

    two_element_data = [10, 20]
    target_two_found_1 = 10
    target_two_found_2 = 20
    target_two_not_found = 15
    print(f"\nМассив: {two_element_data}")
    print(f"Поиск {target_two_found_1}: Индекс {ternary_search(two_element_data, target_two_found_1)} (Ожидается 0)")
    print(f"Поиск {target_two_found_2}: Индекс {ternary_search(two_element_data, target_two_found_2)} (Ожидается 1)")
    print(f"Поиск {target_two_not_found}: Индекс {ternary_search(two_element_data, target_two_not_found)} (Ожидается -1)")

    three_element_data = [10, 20, 30]
    target_three_found_middle = 20
    print(f"\nМассив: {three_element_data}")
    print(f"Поиск {target_three_found_middle}: Индекс {ternary_search(three_element_data, target_three_found_middle)} (Ожидается 1)")
